function formatDate(n){var t=new Date(n);return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()}$.fn.showModal=function(){$(this).click(function(){var n=0,t=$(".project-list").val();$(this).hasClass("edit-phase")&&(n=$("#phase-id").val());$.showLoading();$.ajax({url:"phase/generate-phase.html",type:"POST",data:{phaseId:n,projectId:t},success:function(n){$(".phase-template").html(n);$.initCommonLib();$("#phase-modal .btn-confirm").phaseModalAction();$.hideLoading();$.showDialog({dialogId:"phase-modal"});$.triggerCloseDialog("phase-modal")}})})};$.fn.phaseModalAction=function(){$(this).click(function(n){n.preventDefault();var t=$("#phase-form");$.showLoading();t.valid()&&$.ajax({type:"post",url:"phase/phase-modal-action.html",data:t.serialize(),success:function(n){var t=$(".phase-list-panel");t.html("");t.html(n)},error:function(n){$.alertDialog({title:"Error",content:n.responseText})}}).promise().done(function(){$.closeDialog("phase-modal");$(".phase-list > li > a").loadTask();$.hideLoading()})})};$.fn.removePhase=function(){$(this).click(function(){$.confirmDialog({title:"Warning",content:"All tasks which related to this phase will be removed. Are you sure to continue?",action:function(){$.showLoading();$.ajax({type:"post",url:"phase/delete-phase.html",data:{phaseId:$("#phase-id").val()},success:function(){$(".project-list").change();$.hideLoading()},error:function(n){$.hideLoading();$.alertDialog({title:"Error",content:n.responseText})}})}})})};$(function(){$(".btn-addnew-phase").showModal()});